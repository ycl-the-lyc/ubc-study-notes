#import "@preview/ilm:1.4.0": *
#show: ilm.with(
  title: [
    PHYS 158 Study Notes \
    #underline[Electricity and Magnetism]
  ],
  author: "Yecheng Liang",
)

#import "@preview/weave:0.2.0": compose_ as c_

#import "@preview/cetz:0.3.1": canvas, draw
#import "@preview/cetz-plot:0.1.0": plot
#import "@preview/fletcher:0.5.5" as fletcher: diagram, node, edge

#import "@preview/physica:0.9.4": *
#import "@preview/unify:0.7.1": unit, qty, qtyrange, num, numrange

#let all-terms = state("terms", ())
#show terms.item: it => context {
  let loc = here()
  all-terms.update(c => c + ((it, loc),))
  it
}
#let termlist = [
  #pagebreak(weak: true)
  #heading(level: 1, numbering: none)[Definitions]
  #context terms(
    ..all-terms
      .final()
      .map(el => {
        terms.item(link(el.at(1), el.at(0).term), el.at(0).description)
      }),
    tight: false,
  )
]

= DC Circuits

== Basic Components
/ Power Supplies (DC/AC): Direct Current and Alternating Current.

/ Resistors (R): Resists current, consumes power.
  Light bulbs, lamps are also resistors.

/ #link(<sc:capacitor>)[Capacitors (C)]: Stores electric charge and energy.
  Not to be confused with batteries: \
  Batteries release energy in a slow manner;
  capacitors can discharge energy in a short burst.

/ Inductors/Stabilizers (L): Generates induced current, opposing passing current.

== Current, Voltage, Capacitance, and Resistance
/ Charge (Q): The amount of electric charge, measured in Coulombs (C).

/ Current (I): The flow of electric charge, $I = dd(Q) / dd(t)$, measured in Amperes (A).
  It is generated by a voltage difference.

/ Voltage (V): The potential difference between two points, measured in Volts (V).

/ #link(<sc:capacitance>)[Capacitance (C)]: The ability to store electric charge, measured in Farads (F).

/ Resistance (R): The opposition to the flow of electric current, measured in Ohms ($Omega$).
  $ V = I R $

  Resistance of a resistor depends on its material, length $L$, and cross-sectional area $A$.
  $ R = rho L / A $ where $rho$ is the resistivity of the material.

  For multiple resistors,
  $ R_"series" = R_1 + R_2 + ... $
  $ 1 / R_"parallel" = 1 / R_1 + 1 / R_2 + ... $

== Voltage Drops
/ Electromotive Force (EMF): The voltage difference between the positive and negative terminals of a DC power supply (battery) is $V "or" epsilon$, specified on the battery.

/ Resistance: The voltage drop across a resistor is $ Delta V_R = I R $.

/ Capacitance: The voltage drop across a capacitor is $ Delta V_C = Q / C $ where $C$ is the capacitance.

/ Inductance: The voltage drop across an inductor is $ Delta V_L = -L dd(I) / dd(t) $ where $L$ is the inductance.

== Reading Resistors
There will be maximum 5 color bands on a resistor.
From the left to the right:
- 1-3: The first three digits of the resistance value.
- 4: The number of zeros following the first three digits (multiplier).
- 5: The tolerance of the resistance value.

Sometimes, there will be 4 bands only, where there are only 2 digits represented, followed by the number of zeros.

#let res-digit-colors = (
  "0": black,
  "1": orange.darken(50%), // brown
  "2": red,
  "3": orange,
  "4": yellow,
  "5": green,
  "6": blue,
  "7": purple,
  "8": color.gray,
  "9": white,
)

#let res-tolerance-colors = (
  "5": yellow.transparentize(50%), // gold
  "10": silver,
)

#figure(
  caption: [Resistor digit colors],
  grid(
    columns: res-digit-colors.len(),
    stroke: 0.5pt,
    inset: 0.8em,
    ..for (d, c) in res-digit-colors {
      (grid.cell(fill: c, text(font: "Fira Mono", stroke: 0.8pt + yellow, size: 2em, d)),)
    }
  ),
)

#figure(
  caption: [Resistor tolerance colors],
  grid(
    columns: res-tolerance-colors.len(),
    stroke: 0.5pt,
    inset: 0.8em,
    ..for (d, c) in res-tolerance-colors {
      (grid.cell(fill: c, text(font: "Fira Mono", stroke: 0.8pt + yellow, size: 2em, d + "%")),)
    }
  ),
)

== Kirchhoff's Laws
When traveling in the direction of the current, the voltage change through a resistor is negative, $Delta V = -I R$, and positive through a battery, $Delta V = +epsilon$.
When traveling against the direction of the current, invert the signs.

/ Kirchhoff's Current Law (KCL): The sum of currents entering a node is equal to the sum of currents leaving the node.
  $ Sigma I_"in" = Sigma I_"out" $

/ Kirchhoff's Voltage Law (KVL): The sum of voltage drops in a closed loop is equal to the sum of voltage rises.
  $ Sigma V_"drop" = Sigma V_"rise" $
  A 'closed loop' is a path that starts and ends at the same point, no matter the direction of current.

These two laws are crucial in analyzing circuits (solving problems), especially when appliances are not clearly connected in series or parallel.

== Short, Open Circuits and Proportionality
/ Short Circuit: A circuit with no resistance, causing a large current to flow.
  The voltage drop across a short circuit is zero.
/ Open Circuit: A circuit with infinite resistance, causing no current to flow.

In case of a parallel circuit, the voltage across each component is the same, while the current is inversely proportional to the resistance.
While in a series circuit, the current across each component is the same, while the voltage is inversely proportional to the resistance.

For instance, $qty("3", "A")$ of current flows through a $qty("2", "Omega")$ and a $qty("1", "Omega")$ resistors, the current through each will be $qty("1", "A") "and" qty("2", "A")$.

Combining this knowledge with Kirchhoff's laws, we can solve even more complex circuits.

== Real Batteries
/ Internal Resistance ($r$): The resistance within a battery, causing a voltage drop.
  $
    V_"battery" &= epsilon - I r \
    I &= epsilon / (r + R).
  $

Hence, the terminal voltage of a battery is
$
  V_"terminal" &= epsilon - epsilon / (r + R) r \
  &= epsilon R / (r + R).
$

== Power
/ Power: The rate at which energy is consumed or produced, measured in Watts ($unit("W")$).
  $ P = I V = I^2 R = V^2 / R $

== Grounding
/ Ground: A reference point in a circuit, usually at zero voltage.
  It is used to measure the voltage of other points in the circuit.

/ Grounding: Connecting a circuit to the ground or other big conductors to send away excess energy, usually to prevent electric shock.
  It is also used to stabilize the voltage of a circuit.

Addition of a ground symbol in a circuit diagram does not affect the circuit itself, our calculations stay the same.
However, our *zero reference point changes*, and we must measure the voltage of other points in the circuit with respect to the ground!

== Capacitor <sc:capacitor>
Any collection of conductors that can store electric charge & energy.

== Capacitance ($C$) <sc:capacitance>
The ability to store electric charge, measured in Farads ($unit("F")$).

$
  C = Q / V.
$

Capacitance of a capacitor depends on its material, area $A$, and distance $d$ between plates.
$ C = epsilon A / d $ where $epsilon$ is the electric permittivity of the material.

$ Q = C V $
$ I = dd(Q) / dd(t) = C dd(V) / dd(t) $

For multiple capacitors,
$ C_"series" = 1 / (1 / C_1 + 1 / C_2 + ...) $ <eq:capacitor-series>
$ C_"parallel" = C_1 + C_2 + ... $ <eq:capacitor-parallel>

=== Capacitors in Parallel
As they are in parallel, the voltage drop across them should be the same, regardless of the capacitance.
$
  V &= V_1 = V_2 = ... \
  Q &= C_1 V_1 + C_2 V_2 + ... \
  &= C_1 V + C_2 V + ... \
  &= (C_1 + C_2 + ...) V \
  Q / V &= C_1 + C_2 + ...
$ which leads to @eq:capacitor-parallel.

Imagine all the parallel capacitors as one big capacitor with the sum of capacitances. Now the formula makes sense.

=== Capacitors in Series
When connected in series, the capacitors can be viewed as one beginning plate with positive charges and one ending plate with negative charges, plus all the plates in between, with charges but adding up to zero.

In this case, charges across the capacitors are the same.
$
  Q &= Q_1 = Q_2 = ... \
  V &= V_1 + V_2 + ... \
  &= Q / C_1 + Q / C_2 + ... \
  &= Q (1 / C_1 + 1 / C_2 + ...) \
  V / Q &= 1 / C_1 + 1 / C_2 + ...
$ which leads to @eq:capacitor-series.

=== Work and Energy in Capacitors
Batteries charge capacitors bit by bit, by $dd(q)$.
Thus, we can say the work done is
$
  dd(W) &= Delta V dd(q) \
  &= q / C dd(q) \
$
And energy is
$
  U &= 1 / C integral_0^Q q dd(q) = Q^2 / (2 C) \
  &= (C V^2) / 2.
$ <eq:capacitor-energy>

=== Energy in C-only Circuits
It seems curious that, in a circuit with only capacitors, when charge is transferred between capacitors, the energy is _not_ conserved, in other word, lost.

That is because capacitor behaviors cannot be examined without resistors, so even if not shown, the circuit should contain some resistance, probably in the wires.

=== R-C Circuits
/ R-C Circuits: Circuits with resistors and capacitors.
  They are used in timing circuits, filters, and oscillators.

Imagine a circuit with a battery, a switch, a resistor and a capacitor.
The capacitor initially has no charge, and the switch is closed at $t = 0$.

+ At $t = 0-$, the capacitor has no charge, and the voltage across it is zero.
+ At $t = 0+$, the switch is _just_ closed, and the capacitor starts charging. The voltage across the capacitor is still zero since it has no charge, and hence act as an ideal wire.
+ As time goes by, the capacitor charges, and the voltage across it increases, while the current decreases.
+ At $t -> oo$, the capacitor is fully charged, and it act as an open circuit, and the current is zero.

By Kirchhoff's Voltage Law, the voltage across the resistor and the capacitor should sum up to the battery voltage.
$
  V_"battery" &= V_"resistor" + V_"capacitor" \
  &= i(t) R + q(t) / C.
$
As $i(t) = dv(q, t)$, we can rewrite the equation as
$
  epsilon = R dv(q, t) + q / C.
$ <eq:voltage-rc>

Derive the @eq:voltage-rc in respect to time, we get
$
  dv(epsilon, t) &= R dv(q(t), t, 2) + dv(q(t), t) / C \
  0 &= R dv(i(t), t) + i(t) / C.
$

=== Charging and Discharging Capacitors
When a capacitor is charging, the current flows from the battery to the capacitor, and the voltage across the capacitor increases.
When a capacitor is discharging, the current flows from the capacitor to the circuit, and the voltage across the capacitor decreases.

In an R-C circuit, the energy stored in the capacitor increases and decreases exponentially, respectively.
#let q-charge = t => 1 - calc.exp(-t / 2)
#let q-discharge = t => calc.exp(-t / 2)
$
  q(t)_"charging" &= C V (1 - e^(-t slash R C)) \
  i(t)_"charging" &= dv(q(t), t) = V / R e^(-t slash R C),
$ $C V$ is the final charge that would be stored in the capacitor.

$
  q(t)_"discharging" &= Q_0 e^(-t slash R C) \
  i(t)_"discharging" &= dv(q(t), t) = I_0 e^(-t slash R C).
$ where $Q$ is the maximum charge stored in the capacitor, $R$ is the resistance in series, and $C$ is the capacitance in parallel.

#let plot-options = (
  axis-style: "left",
  size: (8, 4),
  x-label: $t$,
  y-label: $q$,
  x-tick-step: none,
  y-tick-step: none,
  x-ticks: (),
  y-ticks: (),
)
#let dash-stroke = (dash: "dashed", thickness: .5pt, paint: black.transparentize(75%))

#figure(
  canvas({
    import draw: *

    plot.plot(
      name: "f",
      ..plot-options,
      {
        plot.add(q-charge, domain: (0, 8))
        plot.add-anchor("charging-tau", (2, q-charge(2)))

        plot.add(q-discharge, domain: (0, 8))
        plot.add-anchor("discharging-tau", (2, q-discharge(2)))
      },
    )

    circle("f.charging-tau", radius: 1pt)
    line((), (rel: (0, -q-charge(2) * 4)), stroke: dash-stroke)
    content((rel: (0, -.25)), $tau$)
    line("f.charging-tau", (rel: (-2, 0)), stroke: dash-stroke)
    content((rel: (-1, 0)), box(width: 10em, $1 - e^(-1) = 63.2%$))

    circle("f.discharging-tau", radius: 1pt)
    line("f.discharging-tau", (rel: (-2, 0)), stroke: dash-stroke)
    content((rel: (-1, 0)), box(width: 7em, $e^(-1) = 36.8%$))
  }),
)



At times, $R C$ is written as $tau$, the time constant of the RC circuit.
Think: at $t = tau$, how much charge is in the capacitor?

Notice the similarity between these equations and the exponential decay equation for damped oscillations, it will be useful.


== Inductors
/ Inductors: A coil of wire that generates an induced current, opposing the passing current.
  They are used in transformers, motors, and generators.
/ Inductance ($L$): The ability to generate an induced current, measured in Henrys ($unit("H")$).
  $ V = L dd(I) / dd(t) $

Inductors act quite as an opposite to capacitors, consider the prior switch-closed capacitor example:
+ At $t = 0-$, the current is zero, and the voltage across the inductor is zero.
+ At $t = 0+$, the switch is _just_ closed, the voltage across the inductor is $epsilon$ as there is still no current so potential drop across other components (resistor) is zero.
+ As time goes by, the current increases, and the voltage across the inductor decreases.
+ At $t -> oo$, the current is at maximum and constant, and the voltage across the inductor is zero.

$
  i(t)_"charging" &= I_"max" (1 - e^(-R t slash L)) \
  i(t)_"discharging" &= I_"max" e^(-R t slash L).
$

It is more important to know the shape of the graphs: exponential growth and decay, rather than the steps seen in R-only circuits.

Given the current and inductance, the energy stored in the inductor is
$
  U = 1 / 2 L I^2.
$

=== R-L-C Circuits
In an R-L-C circuit, the function for current reminds us of the damped oscillations equation.
So recall the damped oscillations equation:
$
  x(t) = A e^(-t / tau) cos(omega' t + phi)
$ where $A$ is the amplitude, $tau$ is the time constant, $omega'$ is the angular frequency, and $phi$ is the phase angle.
(On formula sheet.)

#figure(
  canvas({
    import draw: *
    plot.plot(
      name: "f",
      ..plot-options + (axis-style: "school-book"),
      {
        plot.add(t => calc.exp(-t / 3) * calc.cos(2 * calc.pi * t), domain: (0, calc.pi * 3), samples: 300)
      },
    )
  }),
)


= AC Circuits
You should still read the DC Circuits section before this one.

/ Root Mean Square (RMS): The square root of the mean of the squares of a set of values.
  For example, the RMS current is the current that would produce the same amount of heat in a resistor as the alternating current which is being derived from.

== Voltage and Current in AC
$
  V(t) = V_"max" sin(omega t).
$

$
  V_"rms" &= V_"max" / sqrt(2) \
  I_"rms" &= I_"max" / sqrt(2).
$
This can be deduced from $sin(omega t) = 1/2 (1 - cos(2omega t))$.

On an oscilloscope, the "Amplitude" will be double the RMS value, since it is measuring the peak-to-trough value.

== R Circuit
$
  i(t) &= V(t) / R \
  &= V_"max" / R sin(omega t),
$ in phase with the voltage.
At times, $R$ is written as $X_R$, the resistance.

== L Circuit
$
  V(t) &= L dv(i,t) \
  dv(i,t) &= V(t) / L \
  &= V_"max" / L sin(omega t), \
  i(t) &= - V_"max" / (omega L) cos(omega t) \
  &= V_"max" / (omega L) cos(omega t - pi / 2) \
  &= I_"max" sin(omega t - pi / 2),
$ out of phase with the voltage.
At times, $omega L$ is written as $X_L$, the inductive reactance.

Note that $X_L &-> 0 "as" omega -> 0, X_L &-> oo "as" omega -> oo.$

== C Circuit
$
  q(t) &= C V(t) \
  i(t) &= dv(q,t) \
  &= (omega C) V_"max" cos(omega t) \
  &= (V_"max" omega C) sin(omega t + pi / 2) \
  &= I_"max" sin(omega t + pi / 2),
$ out of phase with the voltage.
At times, $1 slash (omega C)$ is written as $X_C$, the capacitive reactance.

Note that $X_C &-> oo "as" omega -> 0, X_C &-> 0 "as" omega -> oo.$

== Phasors
Phasors are vectors that represent the amplitude and phase of a sinusoidal function.

#figure(
  caption: [Phasor diagram],
  image("assets/phasor.png", width: 67%),
)

Using projection,
$
  i(t) &= I_"max" cos(omega t) \
  v(t) &= V_"max" cos(omega t + phi).
$

$
  tan(phi) = (X_L - X_C) / X_R
$ is the phase angle between the current and the _source_ voltage.

#figure(
  caption: [Phasor diagram for R-L-C circuits],
  image("assets/phasors-rlc.png", width: 50%),
)

== Impedance
/ Impedance ($Z$): The total opposition to the flow of current in an AC circuit, measured in Ohms ($unit("Omega")$).
It is the combination of resistance, inductive reactance, and capacitive reactance.

From the phasor diagram it is clear that, using Pythagoras' theorem,
$
  Z &= sqrt(X_R^2 + (X_L - X_C)^2) \
  &= sqrt(R^2 + (omega L - 1 / (omega C))^2).
$

Like Ohm's Law, we can write
$
  V_"max" = I_"max" Z.
$

== R-L-C Circuits in Series
If $X_L > X_C$, the current phasor is behind the voltage phasor, and the circuit is inductive.
$
  i(t) &= I_"max" cos(omega t) \
  v(t) &= V_"max" cos(omega t + phi).
$

If $X_L < X_C$, the current phasor is ahead of the voltage phasor, and the circuit is capacitive.
$
  i(t) &= I_"max" cos(omega t) \
  v(t) &= V_"max" cos(omega t - abs(phi)).
$

== R-L-C Circuits in Parallel
In parallel R-L-C circuits, the voltage across each component is the same, while the current is inversely proportional to the impedance.
$
  V &= V_1 = V_2 = ... \
  I &= I_1 + I_2 + ... \
  &= V / Z.
$
Here, using the phasor diagram ($because X_C > X_L, therefore 1 / X_C < 1 / X_L$), we can find the current and the phase angle.
Divide each phasor by $V_"max"$, we get
$
  1 / Z &= sqrt((1 / R)^2 + (1 / X_L - 1 / X_C)^2) \
  &= sqrt((1 / R)^2 + (1 / (omega L) - omega C)^2), \
  tan(phi) &= (1 slash X_L - 1 slash X_C) / (1 slash R).
$

== Power Dissipation
In DC circuits, power is $P = I V$ as we all know it.
Similarly, $P$ is kind of the same in AC circuits, but we need to consider the phase difference between the current and voltage.
$
  angle.l P angle.r = angle.l i(t) v(t) angle.r
$

In R-L-C circuits,
$
  angle.l P angle.r &= (V_"peak" I_"peak") / 2 cos(phi) \
  &= (V_"rms" I_"rms") cos(phi) \
$ with $V_"peak" I_"peak"$ replaceable with anything equivalent.
$cos(phi)$ is called the power factor, and it is the ratio of real power to apparent power.

Only the resistor contributes to power dissipation, so in idealized L/C circuits, the power is zero.

== Resonance
/ Resonance: The frequency at which the impedance of a circuit is at a minimum.
  It is the frequency at which the inductive and capacitive reactances cancel each other out.

Knowing impedance and the oscillation frequency, the current in AC circuits can be expressed as a function of $omega$.
$
  I(omega) &= V_"max" / Z \
  &= V_"max" / sqrt(R^2 + (omega L - 1 / (omega C))^2).
$

Hence,
$
  I_"max" &= V_"max" / R \
$ when $
  omega L &= 1 / (omega C) \
  omega &= 1 / sqrt(L C).
$

= Electric Force and Field

Rules of electric charges:
- Like charges repel, and opposite charges attract.
- Charges are conserved, they cannot be created or destroyed.
- When conductors touch, charges redistribute to reach equilibrium.

/ Electric charge: The fundamental property of matter, measured in Coulombs (C).
  $ q = n e $ where $n$ is the number of charges and $e = qty("1.6e-19", "C")$ is the elementary charge.
/ Coulomb's Law: The force between two charges is directly proportional to the product of the charges and inversely proportional to the square of the distance between them, this force is _equal in magnitude_ on both charges.
  $ F = k (abs(q_1) abs(q_2)) / r^2 $
  where $k = 1 / (4 pi epsilon_0) = qty("8.99e9", "N m^2 / C^2")$ is the Coulomb constant.

We use $k = qty("9e9", "N m^2 / C^2")$ in this course.

== Electrostatic Attraction and Repulsion
Two charges are simple enough: the forces are equal in magnitude and opposite in direction.
How about more charges?

/ Principle of Superposition: The force on a charge due to multiple charges is the vector sum of the forces due to each charge individually.

Here again we introduce vectors, the force is a vector, and the direction of the force is along the line connecting the two charges.
More vectors in MATH 152.

For example, given two point charges with the same charge $Q$ and the same mass $m$ suspended from a point on strings of equal length $L$, the angle between the strings is $theta$ and the distance between the two charges is $r$.
In this case, $Q$ can be expressed as
$
  F_e &= m g tan(theta/2) \
  &= k Q^2 / r^2 \
  &= k Q^2 / ((2L)^2 sin^2(theta / 2)), \
  Q &= sqrt((4 L^2) / k m g tan(theta/2) sin^2(theta/2)).
$

== Electric Field
/ Electric Field: The force per unit charge at a point in space, measured in Newtons per Coulomb ($unit("N/C")$).
  $
    vb(E) = vb(F) / q_t = k q_s / r^2 vb(u)_r
  $ where $F$ is the force on the test charge $q_t$, and $q_s$ is the source of the field.

#figure(
  caption: [Electric fields],
  grid(
    columns: (1fr,) * 1,
    align: center + horizon,
    box(
      clip: true,
      width: 5cm,
      height: 5cm,
      align(
        center + horizon,
        canvas({
          import draw: *

          let qs = (0, 0)
          let qt = (2, 0)
          let m = qs.at(0) + qt.at(0) / 2

          group({
            set-style(stroke: (paint: std.gray, thickness: .05pt))
            for i in range(-10, 11) {
              if i != 0 {
                if calc.abs(i) in (1, 2, 9) { continue }
                let j = calc.pow(i / 5, 3)
                arc-through(qs, (m, j), qt, name: "a" + str(i))
                mark("a" + str(i) + ".mid", (rel: (1, 0)), symbol: "stealth", fill: std.gray)
              }
              line((-2, 0), (4, 0), name: "l")
              mark("l.mid", (rel: (1, 0)), symbol: "stealth", fill: std.gray)
            }
          })

          circle(qs, radius: .5em, stroke: red)
          content((rel: (0, .04)), text(stroke: 1.5pt + red, "+"))
          circle(qt, radius: .5em, stroke: blue)
          content((rel: (0, .04)), text(stroke: 1.5pt + blue, "-"))
        }),
      ),
    ),
  ),
)

=== Superposition of Electric Fields
The field at any point is the _vector_ sum of all individual fields passing through that point.
$
  vb(E) = vb(E)_1 + vb(E)_2.
$
Thus, the fields can be separated into their $x, y, z$ components for computation.

For example, in 2D space, given two charges---a dipole, the combined electric field on a test charge is
$
  vb(E) = (vb(E_1)_x + vb(E_2)_x) vb(i) + (vb(E_1)_y + vb(E_2)_y) vb(j).
$
If given a charge $q$, the angle between the field line and, say, the x-axis, $theta$, and the test charge is $(x, y)$ away from a charge, then the field on the test charge is
$
  vb(E) = (k q) / (x^2 + y^2),
$ and the $x$ component of that is $
  vb(E)_x &= (k q) / (x^2 + y^2) cos(theta) \
  &= (k q) / (x^2 + y^2) x / sqrt(x^2 + y^2) \
  &= (k q x) / (x^2 + y^2)^(3/2)
$

=== Electric Field of a Finite Line of Charge
Considering a finite line (line segment) of charge, and a test charge on the center perpendicular line of the line charge.

By symmetry, the $x$ components of each $dd(vb(E))$ would cancel out, we are left with the $y$ component.
Let the horizontal distant be $x$ and vertical distance be $h$, the total length of the line charge is $2a$, then
$
  dd(E)_y &= + dd(E) sin(theta) \
  &= (k Q) / (2a) dd(x) / (x^2 + h^2) h / sqrt(x^2 + h^2) \
  E_y &= (k Q h) / (2a) integral^(+a)_(-a) dd(x) / (x^2 + h^2)^(3 / 2) \
  &= (k Q h) / (2a) (a - (-a)) / (h^2 sqrt(a^2 + h^2)) \
  &= (k Q) / (h sqrt(a^2 + h^2)).
$

== Electric Dipole
/ Dipole: Two charges of the same magnitude but opposite charge at a small distance, $d$.
/ Dipole moment ($vb(p)$): Naturally, the opposite charges attract each other. The dipole moment is defined as the moment pointing from the negative charge to the positive charge, $ norm(vb(p)) = q d. $

In an uniform electric field, the net force on a dipole is zero.
In a non-uniform electric field, the net force on a dipole is not zero.

And, they experience a torque when not aligned to the fields.
$
  vb(tau) &= vb(p) times vb(F) \
  U_e &= - vb(p) dot vb(E).
$

== Electric Flux
/ Flux ($Phi_e$): The amount of electric field passing through a surface.

Electric flux for a uniform field on a flat surface is
$
  Phi_e &= vb(E) dot vb(A) \
  &= E A cos(theta)
$ where $vb(A)$ is the area vector of the surface (normal to the surface) and $theta$ is the angle between $vb(E)$ and $vb(A)$ (not the surface!).

For a curved surface,
$
  Phi_e &= integral.surf vb(E) dot dd(vb(A)).
$

== Gauss's Law
/ Gauss's Law: The flux of the electric field out of an arbitrary closed surface is proportional to the electric charge enclosed by the surface, irrespective of how that charge is distributed.
  $
    Phi_e = Q_"enclosed" / epsilon_0 = integral.surf vb(E) dot dd(vb(A))
  $ where $vb(E)$ is the electric field, $dd(vb(A))$ is the vector of an infinitesimal surface and $epsilon_0$ is the electric constant.

In most cases, the integral above is not easy to evaluate, there do exist two special cases which we can apply Gauss's law at ease:
- When $vb(E)$ is tangent to the surface, $vb(E) dot vb(A) = 0$, then $Phi_e = 0$.
- When $vb(E)$ is normal to the surface and _constant at every point_ of that surface, then $Phi_e = E integral.surf dd(vb(A)) = E vb(A)$.

Such ideal cases only occur when
+ The charge distribution has high symmetry.
+ It is possible to construct a Gaussian surface that would match the symmetry.

By this token, the electric field created by the following special objects can be determined:
- An infinitely long straight wire with charge density $lambda$ and length $l$.
  $
    E A &= Q / epsilon_0 \
    E (2 pi r l) &= lambda l / epsilon_0 \
    E &= lambda / (2pi r epsilon_0) \
    &= (2 k lambda) / r.
  $
- An infinitely large plane with charge density $sigma$.
  $
    E_"tot" 2A &= Q / epsilon_0 "(I have 2 sides)" \
    &= (sigma 2 A) / epsilon_0 \
    E_"tot" &= sigma / epsilon_0 \
    vb(E) &= sigma / (2 epsilon_0) "(Gaussian surface here also has 2 sides)".
  $

== Conductors in Electrostatic Equilibrium
Since charges can freely move around in a conductor, there can be no electric field inside when in equilibrium (no current).

Excess charge will only sit on its surface, not inside.
The electric fields created are all perpendicular to the conducting surface.

#figure(
  caption: [A conductor in equilibrium],
  image("assets/conductor-equilibruim.png", width: 50%),
)

Gauss's Law still holds true, even for inside cavity.
Faraday cage proves this.

Now, if the conductor is neutral and there are charges in the cavity, in order to fulfill Gauss's Law, the total charge enclosed by the inner surface must be 0, so charges on the inner surface should cancel out with the charges in the cavity.

This is called "screening".

For example, consider a neutral spherical conductor with an also spherical cavity inside with radius $R$. Some charge $q$ is placed at $r = R/2$.

The distribution of charges on the inner shell would be nonuniform, but the outer shell would have _uniform_ charge distribution!
This is because the total charge inside is 0, the charges on the outer shell do not care about it---as long as it is in equilibrium.

=== Application: Coaxial Cable
Coaxial cable is a type of electrical cable consisting of an inner conductor surrounded by a concentric conducting shield, with the two separated by a dielectric (insulating material); many coaxial cables also have a protective outer sheath or jacket.

Define the radius of the inner conductor as $R_1$ and the outer conductor's as $R_2$.
A point $P_1$ between the inner and the outer conductors at $r_1$ has
$
  Phi_e &= integral.surf vb(E) dd(vb(A)) \
  &= E(r_1) A_"side" \
  &= E(r_1) L (2 pi r_1) \
  Q_"in" &= lambda_1 L \
  E(r_1) L (2 pi r_1) &= (lambda_1 L) / epsilon_0.
$
The situation at point $P_2$ at $r_2$ outside of the outer conductor would be pretty much the same, except
$
  E(r_2) L (2 pi r_2) &= ((lambda_1 - lambda_2) L) / epsilon_0
$ since the charge density would be negative to neutralize the system.

Bonus: The surface charge density is the greatest at the place where the radius of curvature is the smallest, explained later.

== Electric Potential Energy
The stored ability to do work is potential.
For a force $vb(F)$ moving an object along path $vb(s)$ with angle $theta$ to the path, the work done is
$
  W &= vb(F) dot vb(s) \
  &= F Delta s cos(theta).
$

The change in potential energy of the object, in turn, is the negative of work done by the force.
$ W_(i -> f) = - Delta U. $

The work done by a source charge onto a test charge is
$
  W &= integral_(x_i)^(x_F) vb(F)_(q_s -> q_t) dd(x) \
  &= integral_(x_i)^(x_f) F_(q_s -> q_t) dd(x) \
  &= integral_(x_i)^(x_f) k (q_s q_t) / x^2 dd(x) \
  &= -k (q_s q_t) / x_f + k (q_s q_t) / x_i \
  &= - Delta U \
  &= - (U_f - U_i) \
  U_(q_s q_t) &= k (q_s q_t) / r_(q_s q_t).
$

For a system of $n >= 2$ charges,
$
  U &= k sum_(i = 1)^(n - 1) (q_i q_(i + 1)) / r_((i) (i + 1)).
$

== Electric Potential
/ Electric potential ($V$): potential energy per unit charge.

We can think of electric potential to electric potential energy as electric field to electric force... but a scalar version.
$
  V = k q_s / r_(q_s q_t).
$
Because the test charge is used as the unit charge, unlike electric forces, this is not mutual.

For a positive charge $q$, it tends to move along an electric field and lose potential energy.
For negative charge, it tends to move opposite to an electric field and gain potential energy.

== Equipotential Maps
Refer to topographic maps.
#text(fill: std.gray)[Or do sports.]

On Equipotential maps, hills mean positive potential, and crates mean negative potential.

Similar to electric fields lines, the equipotential lines are denser where the electric fields is stronger.
Electric field lines always intersect perpendicularly with the equipotential lines, and always point downhill.

== Electric Force, Fields, Potential Energy and Potential
#figure(
  caption: [The Electrical Match Up],
  diagram(
    spacing: 12em,
    $
      vb(F) edge("d", vb(F) = plus.minus q vb(E), <->)
      edge(- Delta U = integral_"path" vb(F) dot dd(vb(s)), <->)
      & Delta U edge("d", Delta U = plus.minus q Delta V, <->) \
      vb(E) edge(Delta V = integral_"path" vb(E) dot dd(vb(s)), <->) & Delta V
    $,
  ),
)

== Finding Electric Fields From Electric Potential
$
  Delta V(r) &= - integral_i^f vb(E) dd(vb(r)) \
  dd(V) &= - vb(E) dot dd(vb(r)) \
  &= - E_r dd(r) \
  E_r &= - dv(V, r).
$
Looks nice, but $dv(V, r)$ in more-than-one-dimension spaces is a multi-variable derivative!
In 3D, $dv(V, r) = pdv(V, x, y, z)$.

We can only differentiate with respect to one of the variables,
$
  E_x &= pdv(V(x, y, z), x) \
  E_y &= pdv(V(x, y, z), y) \
  E_z &= pdv(V(x, y, z), z) \
$
Or written as
$
  vb(E) &= - nabla V(x, y, z) \
  &= -vb(i) pdv(V, x) - vb(j) pdv(V, y) - vb(k) pdv(V, z).
$

It can be easier to get $vb(E)$ through $V$, as $V$ is a scalar that is usually easy to compute, while the other method is to integrate with the surface, which is usually harder.

=== Application: Capacitor
In a cylindrical capacitor, recall that
$
  E_R &= - dv(V, r) \
  &= (2 k lambda) / r \
  dv(ln(r), r) &= 1 / r.
$
Hence
$
  V(r) = -2 k lambda ln(r) + "const".
$

Now, say the outer surface of the inner part has radius $a$, and the inner surface of the outer part has radius $b$,
$
  V(b) &= -2 k lambda ln(b) + "const" \
  &= 0 \
  "const" &= 2 k lambda ln(b). \
  V(r) &= -2 k lambda ln(r) + 2 k lambda ln(b).
$

For a parallel plate capacitor, in between the two plates with distance $d$,
$
  E_+ = E_- &= sigma / (2 epsilon_0) \
  abs(vb(E)) &= sigma / epsilon_0 \
  Delta V &= E d \
  &= (sigma d) / epsilon_0 = Q / A d / epsilon_0 \
  &= Q / C \
  C_parallel &= Q / (Delta V) \
  &= (A epsilon_0) / d.
$

== Electric Properties of Dielectrics and Polarization

When a dielectric material is in an electric field $vb(E)_0$, it is polarized and produces an induced electric field $vb(E)$.
$
  vb(E) = vb(E)_0 / K
$ where $K > 1$ is a constant dependant on the material, is the dielectric constant.

Given a parallel plate capacitor with distance $z$ between the two plates, a dielectric block is then inserted in between the plates.
#grid(
  columns: (1fr, 1fr),
  inset: 0.65em,
  [
    If the plates _are connected_ to a battery, the voltage difference remains constant,
    $
      Delta V &= "const" \
      E &= (Delta V) / d = "const" \
      Q &= Q_0 K arrow.t \
      C &= Q / (Delta V) = (Q_0 K) / (Delta V) = C_0 K arrow.t \
      U &= (C Delta V^2) / 2 = (K C_0 Delta V^2) / 2 = U_0 K arrow.t.
    $
  ],
  [
    If the plates are _not_ connected to battery, the charge difference stays the same,
    $
      Q &= "const" \
      E &= E_0 / K arrow.b \
      Delta V &= E d = E_0 / K d = V_0 / K arrow.b \
      C &= Q / (Delta V) = Q / (V_0 slash K) = C_0 K arrow.t \
      U &= Q^2 / (2C) = Q^2 / (2 C_0 K) = U_0 / K arrow.b.
    $
  ],
)


= Magnetism

== Magnetic Field and Magnetic Force
Charges create electric fields, _moving_ charges create magnetic fields, yes, including magnets.

/ Magnetic field (B): Force per charge per velocity by magnetism, measured in Tesla, $unit("T")$.
  $ vb(F) = plus.minus q vb(v) times vb(B) $ where the $plus.minus$ depends on sign of the charge.

As you see, a stationary charge with $vb(v) = vec(0, 0)$ experiences no magnetic force.

It should look similar to the electric force formula, because they are actually one, as we would later learn.

#figure(
  caption: [Right-hand rule for vector cross-product],
  image("assets/cross-product-right-hand.png", width: 33%),
)

#block(stroke: red, inset: 0.65em)[
  By using the curly right-hand rule from _the current_ to _the field_, we can figure out direction of the force.
]

Magnetic field _left-hand_ trick: \
Counting a core family from thumb to the middle finger, [F]ather, [M]other and [C]hild, they are [F]orce, [M]agnetic field and [C]urrent.

We would see electric monopoles, but never a magnetic monopole---they are always in dipoles.
And, the magnetic fields always from closed loops.

As the magnetic force is always perpendicular to the trajectory of an object, the work done by that force is 0.

If a moving charged particle never lose its energy, then the motion due to an magnetic field would be a circle, we call it _cyclotron motion_.

Base on $F = m a$,
$
  q v B = m v^2 / r
$ where $v^2 / r$ is the centripetal acceleration.
Also, since $t = s / v$,
$
  1 / T = v / (2 pi (m v slash q B))
$ where $2 pi (m v slash q B)$ is the circumference of the cyclotron motion.

To conclude,
$
  r_"cyc" &= (m v) / (q B) \
  f_"cyc" &= (q B) / (2 pi m).
$

== Lorentz Force
At this point, you should have noticed that the magnetic force and electric force are integrated with each other: charges create electric fields, electric fields move charges, moving charges create magnetic fields, magnetic fields move charges...

For this reason, we mostly consider both the electric fields and the magnetic field when computing for charge motions.
$
  vb(F) = plus.minus q vb(E) + plus.minus q vb(v) times vb(B).
$

== Charge Motions
For a charge entering a uniform magnetic field with an angle, that is, not perpendicular to the field lines, it will perform a helix motion along the field lines.
To find the radius of a helix motion, we must split velocity to parallel and perpendicular components, the cyclotron part of the helix motion is caused by the perpendicular component only.

== Hall Effect
A potential difference ("the Hall voltage") develops across a plane conductor in a perpendicular magnetic field when current is passing through the conductor.
Thus, an electric field builds up in the conductor.

== Magnetic Dipole
In a current-carrying loop, the magnitude magnetic dipole moment is
$
  mu = I A.
$ where $A$ is the area of the loop.

Note that $vb(mu)$ is a vector, pointing perpendicular to the loop surface by the curl right-hand rule.

The magnetic torque produced by the dipole moment is
$
  vb(tau)_B = vb(mu) times vb(B).
$

Since the loop would like to align with the magnetic fields, the magnitude of the torque is
$
  tau_B = mu B sin(theta)
$ where $theta$ is the angle between the magnetic fields and $vb(mu)$.

The potential energy of the magnetic dipole is
$
  U_B = - vb(mu)_B dot vb(B)
$

A reminder again that magnetic fields are loops, they _do not stop_ at the poles.

== Gauss's Law for Magnetism
$
  Phi_B = integral.cont vb(B) dot dd(vb(A)) = 0.
$
The magnetic flux of any closed surface is 0, as there is no single magnetic pole.

== Biot-Savart Law
As we know by now, moving charge, a.k.a current, generates magnetic fields.
But how much exactly?

With a component of current $I$ on $dd(vb(l))$, at certain distance from the current component, represented by position vector $vb(r)$, the component of magnetic field generated is
$
  dd(vb(B)) = mu_0 / (4pi) (I dd(vb(l)) times vu(r)) / r^2
$ where $mu_0 = 4pi dot 10^(-7) unit("Tm / A")$ is the magnetic constant.

=== Application: Magnetic Field of a Circular Ring
Imagine a ring with radius $a$ carrying current $I$ sitting on the origin, facing the x-axis.
By symmetry, magnetic fields in y or z direction cancel out.

We would examine $dd(vb(B))$ by the ring in two different cases:
- $x = 0$,
- $x > 0$.

When $x = 0$, meaning the test point is on the same plane as the ring,
$
  dd(B) &= mu_0 / (4pi) (I dd(l)) / a^2 \
  B_x &= mu_0 / (4pi) (I (2pi a)) / a^2 \
  &= (mu_0 I) / (2a)
$ with $2pi a$ being the circumference, is the magnetic field strength in the x-direction.

When $x > 0$,
$
  dd(B) &= mu_0 / (4pi) (I dd(l)) / (x^2 + a^2)
$ with $x^2 + a^2$ being $r^2$.

Let the angle between each $dd(vb(B))$ (_not_ $vb(r)$!) and the x-axis be $theta$,
$
  dd(B)_x &= cos(theta) dd(B) \
  cos(theta) &= a / r \
  &= a / sqrt(x^2 + a^2) \
  B_x &= mu_0 / (4pi) (I (2pi a)) / (x^2 + a^2) a / sqrt(x^2 + a^2) \
  &= mu_0 / 2 (I a^2) / (x^2 + a^2)^(3 / 2).
$

=== Application: Magnetic Field of a Wire
Given a wire with length $2a$ and current from $-a$ to $a$, and a point $P$ with distance $r$ to the wire, and the perpendicular point happens to be $0$ of the $-a -> a$.

First, we assume the wire is infinitely long.
In that case, the decay of its magnetic field would resemble decay of its electric field, just in magnitude.
$
  vb(B)_P &= plus.minus (mu_0 I) / (2pi r) vb(k) \
  B_P &= (mu_0 I) / (2pi r)
$ where the direction depends on orientation of the wire and the test point.

Many wires are not infinitely long (obviously), so we need to integrate over it.
First, to understand the magnitude of the magnetic field,
$
  abs(I dd(vb(l)) times vu(r)) &= I dd(l) abs(vu(r)) sin(theta) \
  &= I dd(y) sin(theta)
$ where $theta$ is the angle from the current to $vb(r)$ of $P$.
$
  vb(B)_P &= integral dd(vb(B)) \
  &= integral mu_0 / (4pi) (d dd(vb(l)) times vu(r)) / r^2 \
  &= plus.minus vb(k) (mu_0 I) / (4pi) integral (sin(theta) dd(y)) / r^2 \
  &= plus.minus vb(k) (mu_0 I) / (4pi) integral (x dd(y)) / r^3 \
  &= plus.minus vb(k) (mu_0 I x) / (4pi) integral_(-a)^a dd(y) / (x^2 + y^2)^(3 / 2) \
  &= plus.minus (mu_0 I) / (4pi) (2a) / (x sqrt(x^2 + a^2)) vb(k).
$

How about semi-infinite "long wire", lie antenna?
Just half of the infinite's.

== Ampère's Law
Consider a circular current-carrying line.
#figure(
  caption: [Ampèrian loop],
  image("assets/amperes-law-loop.png", width: 67%),
)

Integrate the magnetic field along it:
$
  integral.cont vb(B) dot dd(vb(l)) &= integral.cont B dd(l) \
  &= B integral.cont dd(l) \
  &= B dot 2 pi r \
  &= (mu_0 I) / (2 pi r) 2 pi r \
  &= mu_0 I_"enclosed".
$
Unlike Gauss's Law, we choose an Ampère _circular loop_ instead of a surface for evaluation.
For a loop with radius $R$ and current $I_0$, any loop inside of it with a radius $r$ has
$
  I = I_0 r^2 / R^2.
$

Hence, knowing the original loop current $I$, the other loop with a different $r$ has
$
  integral.cont vb(B) dot dd(vb(l)) &= mu_0 I_"enclosed" \
  B_"in" (r) dot 2 pi r &= (mu_0 I r^2) / R^2 \
  B_"in" (r) &= (mu_0 I r) / (2 pi R^2); \
  B_"out" (r) &= (mu_0 I) / (2 pi r).
$

Thus, inside the loop, $B prop r$, outside the loop, $B prop 1 / r$.

== Solenoid
/ Solenoid: A sequence of circular loops, tilted together very tightly.

Notably, there is no magnetic field by a solenoid outside the loops.
This is because each group of three loops would have the middle one's field cancelling the other two's at right above the middle loop.

=== Ideal Solenoid
Take a section with length $L$ and $n$ loops along the solenoid, apply Ampère's Law,
$
  integral.cont vb(B) dot dd(vb(l)) &= mu_0 I_"enclosed" \
  B_"in" L &= mu_0 I n L \
  B_"in" &= mu_0 I n.
$

However, solenoids are often not with infinite length, so we would have to integrate along it.

=== Real Solenoid
Given point $P$ on the center line of the solenoid,
$
  B_"real solenoid" (P) =mu_0 / 2 n I (cos(alpha_R) - cos(alpha_L))
$ where $alpha_L$ and $alpha_R$ are angles from the positive $x$-axis to the line connecting $P$ and the left/right edge of the solenoid.

If the solenoid goes back to infinitely long, $alpha_R = cos(0) = 1, alpha_L = cos(180 degree) = -1$, that gives us the ideal solenoid formula.

== Toroid
If we bend a solenoid into a circle and connect the ends, we get a doughnut-shaped _toroid_.

Say, a toroid has inner radius $a$, outer radius $b$ and a radius of the circle $a <= r <= b$.
$
  integral.cont vb(B) dot dd(vb(l)) &= 2 pi r B_t \
  &= mu_0 I_"enclosed" \
  &= mu_0 I n
$ where $B_t$ is the tangential component of magnetic field produced and $n$ is the number of loops.
$
  B_t = (mu_0 I n) / (2 pi r).
$

For other places, specifically $r < a$ or $r > b$, $B approx 0$.

== Faraday's Law
We know that current comes with magnetic field.
O does magnetic field want a come back.

Recall Gauss's Law for magnetism states that
$
  Phi_B &= integral.cont vb(B) dot dd(vb(A)) \
  dd(Phi_B) &= vb(B) dot dd(A) \
  &= vb(B)_perp dd(A) \
  &= B dd(A) cos(phi).
$

Faraday's law states that
$
  epsilon = - dv(Phi_B, t)
$ where $epsilon$ is the induced EMF in a closed loop.

Well it actually says
$
  abs(epsilon) &= abs(dv(Phi_B, t)) \
  &= abs(dv(, t) B A cos(theta)) \
  &= abs(dv(B, t) A cos(theta) + B dv(A, t) cos(theta) + B A dv(cos(theta), t))
$

If we have a closed loop circuit experiencing changing magnetic flux, $abs(epsilon)$ is the magnitude of the induced EMF, and the sign denotes direction, with positive being counterclockwise.

#figure(
  caption: [Curl right-hand rule for Faraday's law],
  image("assets/faradays-law-right-hand.png", width: 67%),
)

Note that if a loop is simply moving in a magnetic field, it may not experience changing magnetic flux!

=== Application: Faraday Dick Dynamo
Recall that magnetic force $vb(F)_B = plus.minus q vb(v) times vb(B)$.

Imagine a rotating disk with radius $R$ at angular velocity $omega$, with uniform magnetic field perpendicular passing through it.
The rotation moves the electrons on radius $r$ in the disk by velocity $vb(v)$
$
  dd(epsilon) &= vb(E) dot dd(vb(r)) = (vb(v) times vb(B)) dot dd(vb(r)) = v B dd(r) \
  epsilon &= integral_0^R dd(epsilon) = integral_0^R v B dd(r) \
  v &= omega r \
  epsilon &= B integral_0^R (omega r) dd(r) = (omega B R^2) / 2
$ which is called the motional EMF.

This can generate DC power with a brush on the edge of the disk, and the other connected to the center of the disk.

=== Lenz's Law
Faraday's hands are too confusing?
Have this!

The induced current should produce a magnetic field that _opposes_ the magnetic field changes.
#figure(
  caption: [Lenz's law by Farday's law],
  image("assets/lenzs-law-right-hand.png"),
)

This is how inductors work.

== Mutual Inductance
Given two coils 1 and 2,
$
  i_1 ==> B_(1-2) ==> Phi_2 ==> epsilon_2 ==> -dv(Phi_2, t) \
  i_2 ==> B_(2-1) ==> Phi_1 ==> epsilon_1 ==> -dv(Phi_1, t).
$

It is easy to see that the magnetic flux in one coil is proportional to the current in the other coil.
Hence, their induced EMF would be a ratio to the changes in current of each other.
$
  epsilon &= -dv(Phi_B, t), \
  Phi_1 &= M_(2-1) i_2(t) \
  epsilon_1 &= -M_(2-1) dv(i_2, t) \
  Phi_2 &= M_(1-2) i_1(t) \
  epsilon_2 &= -M_(1-2) dv(i_2, t)
$ where $M$'s are some constants.
Turns out, $M_(1-2) = M_(2-1)$, is the mutual induction coefficient.

=== Application: Transformer
There is a iron core, a cube with a cubical hole through.
Two sets of coils wind around opposite sides.
One with AC power, the "primary winding", the other do not, the "secondary winding", called the "load".

Let $Phi_B$ be the magnetic flux through each turn of a coil.
$
  epsilon_1 &= -dv(Phi_(B 1), t) = -N_1 dv(Phi_B, t) \
  epsilon_2 &= -dv(Phi_(B 2), t) = -N_2 dv(Phi_B, t) \
  epsilon_1 / epsilon_2 &= N_1 / N_2
$ where $N$'s are the number of rounds of coils on each side.

== Self-inductance
For similar reasons, when current in a solenoid changes, $Phi_B$ changes, and $epsilon$ is induced.
$
  epsilon &= -dv(Phi_B, t) \
  Phi_B &= N dot B(t) A \
  B(t) &= mu_0 N / L I(t) \
  epsilon &= - (mu_0 A N^2) / L_s dv(i, t) \
  &= -L dv(i, t).
$

== Re: Faraday's Law
$
  epsilon = integral.cont vb(E) dot dd(vb(l)) = -dv(Phi_B, t).
$
This integral form says that _changing magnetic field_ is a source of electric field.
#text(gray)[This is the first time electric field and magnetic field appear in the same equation.]

== Re: Ampère's Law
Previously, the law says that $integral.cont vb(B) dot dd(vb(l)) = mu_0 I_"net"$.
This means, if two surfaces are bound by the same closed curve, the current through them must be the same.
However, there is a problem.

#grid(
  columns: 2,
  [
    Consider a charging capacitor, if we enclose one of the plate by a flat surface before the plate, and a bulging surface between the plates based on the same path (like a half-ball), the current through the flat one is not 0, but the current through the bulging one is 0.
    Our current Ampère's Law is incomplete.
  ],
  figure(
    caption: [A paradoxical situation],
    image("assets/ampere-buldge-surface-paradox.png", width: 67%),
  ),
)

So there must be something through the bulging surface.
We define a "displacement current" which is not a current nor a displacement...
/ Displacement current: An imaginary current to cover increasing potential difference but no current cases for Ampère's Law.
  $
    I_D =& epsilon_0 dv(Phi_E, t) = epsilon_0 A dv(E, t)
  $ with the direction being the sign product of the direction of the $vb(E)$ and its value.

Now, the Ampère's Law, or Ampère-Maxwell's Law is complete:
$
  integral.cont vb(B) dot dd(vb(l)) =& mu_0 (I_C + I_D)
$ where $I_C$ is the real current.
With this definition, even if there is no current, an increasing electric field still denotes an increasing magnetic field.

=== Application: Magnetic Field In Capacitors
For a point between capacitor plates, there is no (conventional) current flowing through, but the displacement current we just defined.
Given that the plates are circles with radius $R$, and the test point sits at radius $r$.
$
  integral.cont vb(B) dot dd(vb(l)) =& mu_0 I_D = epsilon_0 A dv(E, t) = epsilon_0 pi R^2 dv(E, t) \
  E(t) =& //TODO see post- slides
$

== Maxwell's Equations
#figure(
  caption: [Maxwell's Equations],
  {
    set math.equation(numbering: none)
    show math.equation: set text(size: 0.8em)
    set par(justify: false)
    show table.cell: c => {
      let rule(x, y) = {
        if y == 0 { return c => c }
        if x == 0 {
          text.with(size: 0.8em)
        } else if x == 3 {
          text.with(size: 0.8em)
        } else { c => c }
      }
      rule(c.x, c.y)(c)
    }

    table(
      columns: (0.9fr,) + (auto,) * 2 + (1.5fr,),
      align: center + horizon,
      table.header(
        [Law],
        [Integral Form],
        [Differential Form],
        [Meaning],
      ),

      [Gauss's law],
      $ integral.surf vb(E) dot dd(vb(A)) = Q_"in" / epsilon_0 $,
      $ div vb(E) rho / epsilon_0 $,
      [Electric charges produce \ electric field.],

      [Gauss's #{sym.wj}law for magnetism],
      $ integral.surf vb(B) dot dd(vb(A)) = 0 $,
      $ div vb(B) = 0 $,
      [There are no \ magnetic monopoles.],

      [Faraday's law],
      $ integral.cont vb(E) dot dd(vb(l)) = - dv(Phi_B, t) $,
      $ curl vb(E) = - pdv(vb(B), t) $,
      [Electric field can be also produced by changing magnetic field.],

      [Ampère-Maxwell's law],
      $ integral.cont vb(B) dot dd(vb(l)) = mu_0 dv(q, t) + mu_0 epsilon_0 dv(Phi_E, t) $,
      $ curl vb(B) = mu_0 (J + epsilon_0 pdv(vb(E), t)) $,
      [Magnetic field is produced by electric currents and changing electric field.]
    )
  },
)

Using the Maxwell's equations, we are able to deduce the generic wave equation with the direction of propagation, $x$, direction of $vb(E)$, $y$, and direction of $vb(B)$, $z$.
$
  pdv(u(x, t), t, 2) =& v^2 pdv(u(x, t), x, 2) \
  pdv(E_y (x), t, 2) =& 1 / (epsilon_0 mu_0) pdv(E_y, x, 2) \
  pdv(B_z (x), t, 2) =& 1 / (epsilon_0 mu_0) pdv(B_z, x, 2)
$ where the $u$'s are scalar function describing the magnitude of the wave in certain directions and $v$ is the wave velocity.
The $1 / (epsilon_0 mu_0)$ is the velocity of electromagnetic waves in vacuum, $c$!

The equation is solved to
$
  B_z =& B_0 sin(k x - omega t) \
  E_y =& E_) sin(k x - omega t)
$ where $k = 2pi slash lambda, omega = c k$.

== Magnetic Materials

=== Diamagnetism
Diamagnetism appears in all materials and is the tendency of a material to oppose an applied magnetic field, and therefore, to be repelled by a magnetic field.

=== Paramagnetism
In a paramagnetic material there are unpaired electrons; i.e., atomic or molecular orbitals with exactly one electron in them. While paired electrons are required by the Pauli exclusion principle to have their intrinsic ('spin') magnetic moments pointing in opposite directions, causing their magnetic fields to cancel out, an unpaired electron is free to align its magnetic moment in any direction. When an external magnetic field is applied, these magnetic moments will tend to align themselves in the same direction as the applied field, thus reinforcing it.

#text(gray)[Yes, Wikipedia.]

== Superconductivity
From experience, we know that as electrical appliances get hotter, their performance drops.

A normal conductor's resistance increases with temperature rise, and decreases with temperature drop, but it does not drop to zero.

For a superconducting material, its resistance do drops to (near) zero at a certain temperature.
At that point, the current inside is so pure that it rejects all magnetic fields.
If there is impurity inside the superconductor, some magnetic fields would penetrate it.




#termlist
